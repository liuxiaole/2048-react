(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{15:function(e,t,n){e.exports=n(33)},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),c=n.n(i),o=n(9),s=n(14),l=n(1),u=n(2),m=n(4),d=n(3),h=(n(20),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.score!==e.score||this.props.children!==e.children}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.score,a=e.children;return r.a.createElement("div",{className:"score-box"},r.a.createElement("div",{className:"score-label"},t),r.a.createElement("div",{className:"score-content"},n),a)}}]),n}(a.Component)),v=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){var t=e.score,n=e.bestScore,a=e.additionScores,r=this.props;return r.score!==t||r.bestScore!==n||r.additionScores!==a}},{key:"render",value:function(){var e=this.props;return r.a.createElement("div",{className:"header-box"},r.a.createElement("h1",{className:"title"},"2048"),r.a.createElement(h,{score:e.score,label:"SCORE"},e.additionScores.map((function(t,n){return r.a.createElement("div",{className:"addition-score",key:t.key,onAnimationEnd:function(a){return e.onAdditionScoreAnimationEnd(a,t,n)}},"+",t.score)}))),r.a.createElement(h,{score:e.bestScore,label:"BEST"}),r.a.createElement("div",{className:"desc-txt"},r.a.createElement("span",{className:"bold"},"Play 2048 Game Online"),r.a.createElement("br",null),"Join the numbers and get to the ",r.a.createElement("span",{className:"bold"},"2048 tile!")),r.a.createElement("button",{className:"new-game-btn",onClick:e.onNewGame},"New Game"))}}]),n}(a.Component),f=n(8),b=(n(21),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.cell,a=t.col,i=t.row,c=(e={tile:!0},Object(f.a)(e,"tile-".concat(n.number),!0),Object(f.a)(e,"tile-new",n.newGenerated),Object(f.a)(e,"tile-merged",!!n.newMerged),e),o=Object.keys(c).filter((function(e){return!!c[e]})).join(" "),s=110*i+"px",l={transform:"translate3d(".concat(110*a+"px",", ").concat(s,", 0)")};return r.a.createElement("div",{className:o,style:l},r.a.createElement("div",{className:"tile-inner"},n.number))}}]),n}(a.Component)),p=(n(22),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getTiles",value:function(){return this.props.cells.reduce((function(e,t,n){return t.reduce((function(e,t,a){return t&&(e.push({cell:t,row:n,col:a}),t.mergedItem&&e.push({cell:t.mergedItem,row:n,col:a})),e}),e)}),[]).sort((function(e,t){return e.cell.uuid-t.cell.uuid})).map((function(e){return r.a.createElement(b,{key:"tile-"+e.cell.uuid,cell:e.cell,col:e.col,row:e.row})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"tile-container"},this.getTiles())}}]),n}(a.Component)),g=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){var t=e.nextSize;return this.props.size!==t}},{key:"getGrids",value:function(){var e=this.props.size;return new Array(e).fill().map((function(t,n){return function(t){return new Array(e).fill().map((function(n,a){return r.a.createElement("div",{className:"grid-cell",key:"grid-cell-".concat(t*e+a)})}))}(n)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"grid-container"},this.getGrids())}}]),n}(a.Component);function w(e){return r.a.createElement("div",{className:"game-board"},r.a.createElement(v,e),r.a.createElement("div",{className:"game-box"},r.a.createElement(g,{size:e.size}),r.a.createElement(p,{cells:e.cells}),e.children),r.a.createElement("a",{href:"https://github.com/liuxiaole/2048-react",className:"view-score-link"},"view source on github"))}n(23);function y(e){var t=e.onNewGame;return r.a.createElement("div",{className:"game-over"},r.a.createElement("h1",{className:"title"},"Game Over!"),r.a.createElement("button",{onClick:t},"Try Again"))}var E=n(13),S=n.n(E),k={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},O=0,j=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state=a.getInitialState(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.newTile(),this.newTile(),this.handleKeyPress=this.handleKeyPress.bind(this),window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"handleKeyPress",value:function(e){var t=e.key;if(this.state.gameStarted){var n=t.toLowerCase().match(/arrow(up|right|down|left)/);n&&(this.move(n[1]),e.preventDefault())}}},{key:"getInitialState",value:function(){for(var e=this.props.size||4,t=[],n=0;n<e;n++)for(var a=t[n]=[],r=0;r<e;r++)a[r]=null;return{size:e,cells:t,gameStarted:!0,additionScores:[],score:0,bestScore:+localStorage.getItem("bestScore")}}},{key:"eachCell",value:function(e,t){return e.cells.forEach((function(e,n){return e.forEach((function(e,a){return t(e,n,a)}))}))}},{key:"newTile",value:function(){var e=this;this.setState((function(t){var n=e.state.cells,a=[];if(e.eachCell(t,(function(e,t,n){e?e.mergedItem&&(e.number+=e.mergedItem.number,e.newMerged=!0):a.push([t,n])})),a.length){var r=Math.floor(Math.random()*a.length),i=Object(s.a)(a[r],2),c=i[0],o=i[1];n[c][o]={number:Math.random()>.8?4:2,newGenerated:!0,newMerged:!1,mergedItem:null,uuid:O++}}return{cells:n}}))}},{key:"isMovable",value:function(){var e=!1,t=this.state.cells,n=this.state.size;return this.eachCell(this.state,(function(a,r,i){if(!e)if(a){if(r<n-1){var c=t[r+1][i];if(c&&c.number===a.number)return void(e=!0)}if(i<n-1){var o=t[r][i+1];if(o&&o.number===a.number)return void(e=!0)}}else e=!0})),e}},{key:"sleep",value:function(e){return new S.a((function(t){setTimeout(t,e)}))}},{key:"move",value:function(e){var t=this;if(!this.isMoving){for(var n=this.state.size,a=this.state.cells,r=k[e],i=!1,c=0,s=0;s<n;s++)for(var l=0;l<n;l++){var u=s,m=l;"right"===e&&(m=n-l-1),"down"===e&&(u=n-s-1);var d=a[u][m];if(d){d.newGenerated=!1,d.newMerged=!1,d.mergedItem=null;for(var h=m+r[0],v=u+r[1],f=void 0;h>=0&&h<n&&v>=0&&v<n&&!(f=a[v][h]);)h+=r[0],v+=r[1];f&&!f.mergedItem&&f.number===d.number?(d.mergedItem=f,a[v][h]=d,a[u][m]=null,i=!0,c+=f.number+d.number):(h-=r[0],v-=r[1],h===m&&v===u||(a[v][h]=d,a[u][m]=null,i=!0))}}i&&(this.isMoving=!0,this.setState((function(e){var t={cells:a,score:e.score+c};return c&&(t.additionScores=[].concat(Object(o.a)(e.additionScores),[{score:c,key:"score"+Date.now()}])),t})),this.sleep(80).then((function(){t.newTile(),t.checkGameStatus(),t.isMoving=!1})))}}},{key:"checkGameStatus",value:function(){if(!this.isMovable()){var e=this.state.bestScore;e<this.state.score&&(e=this.state.score,localStorage.setItem("bestScore",e)),this.setState({gameStarted:!1,bestScore:e})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,Object.assign({},this.state,{onAdditionScoreAnimationEnd:this.handleAdditionScoreAnimationEnd.bind(this),onNewGame:this.startNewGame.bind(this),onSwipe:this.move.bind(this)}),!this.state.gameStarted&&r.a.createElement(y,{onNewGame:this.startNewGame.bind(this)})))}},{key:"handleAdditionScoreAnimationEnd",value:function(e,t,n){this.setState((function(e){var t=e.additionScores;return{additionScores:[].concat(Object(o.a)(t.slice(0,n)),Object(o.a)(t.slice(n+1)))}}))}},{key:"startNewGame",value:function(){var e=this;setTimeout((function(){O=0,e.setState(e.getInitialState()),e.newTile(),e.newTile()}),0)}}]),n}(a.Component);n(32);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9f971970.chunk.js.map